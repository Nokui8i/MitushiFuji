{% comment %}
Beautiful Newsletter Popup Design
Two-column layout: Left (black content), Right (white image with red accent)
{% endcomment %}

{%- liquid
  assign form_id = 'beautifulNewsletterForm' | append: section.id
  assign logo_text = section.settings.logo_text | default: shop.name
  assign headline_main = section.settings.headline_main | default: 'EXCLUSIVE DISCOUNT'
  assign headline_sub = section.settings.headline_sub | default: 'ON YOUR FIRST ORDER'
  assign description_text = section.settings.description_text | default: 'Join the family and get exclusive email-only offers by signing up.'
  assign email_label = section.settings.email_label | default: 'ENTER YOUR EMAIL'
  assign button_text = section.settings.button_text | default: 'UNLOCK YOUR OFFER'
  assign popup_width = section.settings.popup_width | default: 70
  assign popup_height = section.settings.popup_height | default: 70
-%}

<style>
  .beautiful-newsletter-popup {
    max-width: none;
    width: {{ popup_width }}%;
    max-width: 1400px;
    height: {{ popup_height }}%;
    max-height: 800px;
    margin: 0;
    background: #ffffff;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  }
  
  @media (max-width: 749px) {
    .beautiful-newsletter-popup {
      width: 95%;
      height: 85%;
      max-height: 600px;
    }
  }
  
  .beautiful-newsletter-popup__container {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    height: 100%;
  }
  
  @media (min-width: 750px) {
    .beautiful-newsletter-popup__container {
      flex-direction: row;
    }
  }
  
  .beautiful-newsletter-popup__left {
    background: #000000;
    color: #ffffff;
    padding: 60px 50px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    position: relative;
    flex: 1;
    min-height: 100%;
    height: 100%;
  }
  
  @media (max-width: 749px) {
    .beautiful-newsletter-popup__left {
      padding: 40px 30px;
      min-height: 100%;
    }
  }
  
  .beautiful-newsletter-popup__close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #000000;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    color: #ffffff;
    font-size: 20px;
    line-height: 1;
    transition: transform 0.2s;
  }
  
  .beautiful-newsletter-popup__close:hover {
    transform: scale(1.1);
  }
  
  .beautiful-newsletter-popup__logo {
    font-size: 32px;
    font-weight: 700;
    letter-spacing: 2px;
    margin-bottom: 40px;
    color: #ffffff;
    text-transform: uppercase;
  }
  
  .beautiful-newsletter-popup__logo .logo-accent {
    color: #ff0000;
  }
  
  .beautiful-newsletter-popup__headline-main {
    font-size: 48px;
    font-weight: 900;
    color: #ff0000;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
    line-height: 1.1;
  }
  
  @media (max-width: 749px) {
    .beautiful-newsletter-popup__headline-main {
      font-size: 32px;
    }
  }
  
  .beautiful-newsletter-popup__headline-sub {
    font-size: 18px;
    font-weight: 600;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 30px;
  }
  
  .beautiful-newsletter-popup__description {
    font-size: 14px;
    color: #ffffff;
    margin-bottom: 40px;
    max-width: 400px;
    line-height: 1.6;
  }
  
  .beautiful-newsletter-popup__form {
    width: 100%;
    max-width: 400px;
  }
  
  .beautiful-newsletter-popup__email-label {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
    text-align: left;
  }
  
  .beautiful-newsletter-popup__email-input {
    width: 100%;
    padding: 16px 20px;
    background: #ffffff;
    border: 2px solid #000000;
    color: #000000;
    font-size: 16px;
    margin-bottom: 20px;
    box-sizing: border-box;
    border-radius: 0;
  }
  
  .beautiful-newsletter-popup__email-input::placeholder {
    color: #999999;
  }
  
  .beautiful-newsletter-popup__email-input:focus {
    outline: none;
    border-color: #ff0000;
  }
  
  .beautiful-newsletter-popup__button {
    width: 100%;
    padding: 18px 30px;
    background: #ff0000;
    color: #ffffff;
    border: none;
    font-size: 14px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
    border-radius: 0;
  }
  
  .beautiful-newsletter-popup__button:hover {
    background: #cc0000;
    transform: translateY(-2px);
  }
  
  .beautiful-newsletter-popup__right {
    background: #ffffff;
    position: relative;
    overflow: hidden;
    flex: 1;
    min-height: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  @media (max-width: 749px) {
    .beautiful-newsletter-popup__right {
      min-height: 100%;
    }
  }
  
  .beautiful-newsletter-popup__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }
  
  .beautiful-newsletter-popup__error,
  .beautiful-newsletter-popup__success {
    margin-top: 16px;
    padding: 12px;
    border-radius: 4px;
    font-size: 14px;
    text-align: left;
  }
  
  .beautiful-newsletter-popup__error {
    background: rgba(255, 0, 0, 0.1);
    color: #ff0000;
    border: 1px solid #ff0000;
  }
  
  .beautiful-newsletter-popup__success {
    background: rgba(0, 255, 0, 0.1);
    color: #00ff00;
    border: 1px solid #00ff00;
  }
</style>

<div class="beautiful-newsletter-popup h-100 d-flex fd-column">
  <button class="beautiful-newsletter-popup__close js-popup-close-btn" type="button" data-dismiss="modal" aria-label="{{ 'accessibility.close_popup' | t }}">
    Ã—
  </button>
  
  <div class="beautiful-newsletter-popup__container">
    <!-- Left Column: Content -->
    <div class="beautiful-newsletter-popup__left">
      <div class="beautiful-newsletter-popup__logo">
        {{ logo_text | replace: 'Q', '<span class="logo-accent">Q</span>' }}
      </div>
      
      <h2 class="beautiful-newsletter-popup__headline-main">
        {{ headline_main }}
      </h2>
      
      <p class="beautiful-newsletter-popup__headline-sub">
        {{ headline_sub }}
      </p>
      
      <p class="beautiful-newsletter-popup__description">
        {{ description_text }}
      </p>
      
      <div class="beautiful-newsletter-popup__form">
        {%- form 'customer', id: form_id -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          
          <label for="email-{{ form_id }}" class="beautiful-newsletter-popup__email-label">
            {{ email_label }}
          </label>
          
          <input 
            id="email-{{ form_id }}"
            type="email" 
            name="contact[email]" 
            class="beautiful-newsletter-popup__email-input"
            value="{{ form.email }}" 
            placeholder="Email"
            aria-required="true"
            autocorrect="off"
            autocapitalize="off"
            autocomplete="email"
            {% if form.errors %} 
              autofocus 
              aria-invalid="true" 
              aria-describedby="{{ form_id }}-error" 
            {% elsif form.posted_successfully? %} 
              aria-describedby="{{ form_id }}-success"
            {% endif %}
            required
          >
          
          <button type="submit" class="beautiful-newsletter-popup__button">
            {{ button_text }}
          </button>
          
          {%- if form.errors -%}
            <div id="{{ form_id }}-error" class="beautiful-newsletter-popup__error" role="alert">
              {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
            </div>
          {%- endif -%}
          
          {%- if form.posted_successfully? -%}
            <div id="{{ form_id }}-success" class="beautiful-newsletter-popup__success" role="alert">
              {{ 'general.newsletter.success' | t }}
            </div>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>
    
    <!-- Right Column: Image -->
    <div class="beautiful-newsletter-popup__right">
      {% if section.settings.right_image %}
        {%- liquid
          assign image_alt = section.settings.right_image.alt | default: 'Newsletter'
          assign image_url = section.settings.right_image | image_url: width: 800
        -%}
        <img 
          src="{{ image_url }}" 
          alt="{{ image_alt }}"
          class="beautiful-newsletter-popup__image"
          loading="eager"
        >
      {% else %}
        <div style="width: 100%; height: 100%; background: #f5f5f5; display: flex; align-items: center; justify-content: center; color: #999; font-size: 18px;">
          Image Placeholder
        </div>
      {% endif %}
      
    </div>
  </div>
</div>
