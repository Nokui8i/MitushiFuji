class SHTProductQuickVIewVariantSelector extends HTMLElement{constructor(){super()}init(){this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.elms={radio_elms:this.$$(".js-variant-radio-item"),form:SHTHelper.qs("#productQuickViewForm-"+this.dataset.section),price:SHTHelper.qs("#productQuickViewPrice-"+this.dataset.section),selected_variant:SHTHelper.qs("#productQuickViewSelectedVariant-"+this.dataset.section),product_quick_view_form:SHTHelper.qs("sht-prd-qck-vw-frm"),inventory_tracking:SHTHelper.qs("#productQuickViewInventoryTracking-"+this.dataset.section),variant_picker:SHTHelper.qs("#productQuickViewVariantPicker-"+this.dataset.section),quantity_input:SHTHelper.qs("#productQuickViewQuantity-"+this.dataset.section),product_quick_view_media_gallery:SHTHelper.qs("sht-prd-qck-vw-media-gallery"),variant_options:this.$$(".js-variant-option-value")},this.price_selector="#productQuickViewPrice-"+this.dataset.section,this.inventory_tracking_selector="#productQuickViewInventoryTracking-"+this.dataset.section,this.variant_picker_selector="#productQuickViewVariantPicker-"+this.dataset.section,this.quantity_input_selector="#productQuickViewQuantity-"+this.dataset.section,this.variantData=this.setSelectedVariants(this),this.updateSelectedVariants(this.variantData),this.bindEventHandlers()}connectedCallback(){this.init()}bindEventHandlers(){this.addEventListener("change",this.onVariantChangeHandle.bind(this))}onVariantChangeHandle(){this.toggleAddButton(!0),this.removeErrorMessage(),this.renderProductInfo()}setSelectedVariants(t){return JSON.parse(t.querySelector('[data-selected-variant][type="application/json"]').textContent)}updateSelectedVariants(t){t?.options&&(this.elms.selected_variant.innerHTML=t.title,t.options.forEach((t,e)=>{var i,s,e=(t+"-"+e).replace(/"/g,'\\"'),e=this.$(`.js-variant-item[data-variant-value="${e}"]`);e&&(i=e.getAttribute("data-variant-name")||e.getAttribute("name"),e=e.dataset.optionVariantValue,i)&&((s=this.$(`.js-variant-radio-option-name[data-option-name="${i.replace(/"/g,'\\"')}"]`))&&(s.innerHTML=t),s=this.$(`.js-variant-select-option-name[data-option-name="${i.replace(/"/g,'\\"')}"]`))&&(s.innerHTML=e||t)}))}updateVariantStatuses(){const a=this.variant_data.filter(t=>this.querySelector(":checked").value===t.option1),n=[...this.querySelectorAll(".js-selectbox-wrapper")];n.forEach((t,e)=>{if(0!==e){var i=[...t.querySelectorAll("option")];const r=n[e-1].querySelector(":checked").value;var s=a.filter(t=>t.available&&t["option"+e]===r).map(t=>t["option"+(e+1)]),i=(this.setSelectOptionAvailability(i,s),[...t.querySelectorAll('input[type="radio"]')]);0<i.length&&this.setColorSwatchSelectOptionAvailability(i,s)}})}setSelectOptionAvailability(t,e){t.forEach(t=>{e.includes(t.getAttribute("value"))?t.innerText=t.getAttribute("value"):t.innerText=SHTLanguage.product.PRODUCT_UNAVAILABLE_WITH_OPTION.replace("[value]",t.getAttribute("value"))})}setColorSwatchSelectOptionAvailability(t,i){t.forEach(t=>{var e=this.querySelector(`div.js-variant-option-value[data-value="${t.getAttribute("data-variant-value").replace(/"/g,'\\"')}"]`);i.includes(t.getAttribute("value"))?e&&e.classList.remove("product-option--unavailable"):e&&e.classList.add("product-option--unavailable")})}removeErrorMessage(){this.elms.product_quick_view_form&&this.elms.product_quick_view_form.handleErrorMessage()}setUnavailable(){var t,e=this.elms.form,i=this.elms.inventory_tracking;e&&(t=(e=e.querySelector(".js-product-form-submit-btn")).querySelector(".js-product-form-submit-btn-text"),e)&&(i.setAttribute("hidden","true"),t.textContent=SHTLanguage.product.PRODUCT_UNAVAILABLE,this.elms.price)&&this.elms.price.classList.add("visibility-hidden")}getVariantData(){return this.variant_data=this.variant_data||JSON.parse(this.$('[type="application/json"]').textContent),this.variant_data.map(i=>{i.my_options=[],i.options.forEach((t,e)=>{i.my_options.push(t+"-"+e)})}),this.variant_data}toggleAddButton(t=!0,e,i){var s,r=this.elms.form;r&&(s=(r=r.querySelector(".js-product-form-submit-btn")).querySelector(".js-product-form-submit-btn-text"),r)&&(t?(r.setAttribute("disabled","disabled"),e&&(s.textContent=e)):(r.removeAttribute("disabled"),s.textContent=SHTLanguage.product.PRODUCT_ADD_TO_CART))}updateVariantInput(){[this.elms.form].forEach(t=>{t&&((t=t.querySelector('input[name="id"]')).value=this.currentVariant.id,t.dispatchEvent(new Event("change",{bubbles:!0})))})}getSelectedVariantValue(){return Array.from(this.querySelectorAll(".js-variant-item:checked")).map(t=>t.dataset.optionValueId)}buildRequestUrlWithParams(t,e){var i=new URLSearchParams({section_id:this.dataset.section});return e.length&&i.append("option_values",e.join(",")),t+"?"+i.toString()}async renderProductInfo(){var t=this.dataset.url,e=this.getSelectedVariantValue(),t=this.buildRequestUrlWithParams(t,e);try{var i=await fetch(t);if(!i.ok)throw new Error("Network response was not ok");var s=await i.text(),r=(new DOMParser).parseFromString(s,"text/html"),a=this.setSelectedVariants(r);if(!a)return this.setUnavailable();this.updateUI(r,a)}catch(t){console.error("Error fetching product info:",t),this.setUnavailable()}}checkInventory(t){var e=this.elms.inventory_tracking,t=t.querySelector(this.inventory_tracking_selector);e&&(e.innerHTML=t?.innerHTML??"")}updateVariantInput(e){var t;e&&(t=[this.elms.form,this.elms.installment_form],SHTHelper.qs(".js-inventory-tracking")?.classList.remove("d-none"),t.forEach(t=>{t&&(t=t.querySelector('input[name="id"]'))&&(t.value=e.id,t.dispatchEvent(new Event("change",{bubbles:!0})))}),window.Shopify?.PaymentButton)&&requestAnimationFrame(()=>{this.elms.installment_form&&(t=this.elms.installment_form.querySelector(".shopify-payment-button"))&&"undefined"!=typeof SHTCustomComponent&&SHTCustomComponent.enhancePaymentButtons&&SHTCustomComponent.enhancePaymentButtons(t);var t=document.querySelector("sht-prd-frm-sticky form");t&&(t=t.querySelector(".shopify-payment-button"))&&"undefined"!=typeof SHTCustomComponent&&SHTCustomComponent.enhancePaymentButtons&&SHTCustomComponent.enhancePaymentButtons(t)})}updateOptionValues(t){var t=t.querySelector(".js-variant-picker"),e=this.elms.variant_picker;t&&e&&(e.innerHTML=t.innerHTML)}updateUI(t,e){this.checkInventory(t),this.updateVariantInput(e),this.updateOptionValues(t),this.setActiveMedia(e),this.updatePrice(t),this.updateSku(t),this.updateQuantity(t),this.updateSelectOptions(t,e),this.updateAddToCartState(e)}updateAddToCartState(t){this.toggleAddButton(!t.available,SHTLanguage.product.PRODUCT_SOLD_OUT)}updatePrice(t){t=t.querySelector(this.price_selector);t&&this.elms.price&&(this.elms.price.innerHTML=t.innerHTML,this.elms.price.classList.remove("d-none-important"))}updateSelectOptions(t,e){t=t.querySelectorAll("sht-select .js-variant-select-item");const i=this.querySelectorAll("sht-select .js-variant-select-item");t.forEach((t,e)=>{i[e]&&(i[e].innerHTML=t.innerHTML)}),this.updateSelectedVariants(e)}updateQuantity(t){var e=this.elms.quantity_input?.querySelector(".js-max-quantity-message"),i=t.querySelector(this.quantity_input_selector)?.querySelector(".js-max-quantity-message"),e=(e&&(e.classList.add("d-none-important"),e.innerHTML=i?.innerHTML??""),t.querySelector(this.quantity_input_selector));this.elms.quantity_input&&(this.elms.quantity_input.innerHTML=e?.innerHTML??"")}updateSku(t){t=t.querySelector(this.sku_selector);this.elms.sku&&(this.elms.sku.innerHTML=t?.innerHTML??"")}setActiveMedia(t){t&&t.featured_media&&(t=this.dataset.section+"-"+t.featured_media.id,this.elms.product_quick_view_media_gallery)&&(this.elms.product_quick_view_media_gallery.setActiveItem(t),this.elms.product_quick_view_media_gallery.setActiveThumbnail(t))}toggleUnavailableOptions(e=!1){this.elms.variant_options.forEach(t=>{t.classList.toggle("product-option--unavailable",e)})}}class SHTProductQuickVIewVariantRadios extends SHTProductQuickVIewVariantSelector{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.select_type="button"}}customElements.define("sht-prd-qck-vw-variant-radios",SHTProductQuickVIewVariantRadios);class SHTProductQuickVIewVariantSelects extends SHTProductQuickVIewVariantSelector{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.select_type="dropdown"}}customElements.define("sht-prd-qck-vw-variant-selects",SHTProductQuickVIewVariantSelects);class SHTQuickViewVariantSwatchSelect extends HTMLElement{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this)}init(){this.radios=this.$$(".js-variant-radio-item"),this.select_id=this.dataset.selectId,this.select_element=document.querySelector("#"+this.select_id),this.bindEventHandlers()}bindEventHandlers(){this.radios.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),Array.from(this.radios,t=>{t.checked=!1}),setTimeout(()=>{t.target.checked=!0}),this.select_element&&(this.select_element.querySelector(`option[value="${t.target.value.replace(/"/g,'\\"')}"]`).selected=!0,this.select_element.dispatchEvent(new Event("change",{bubbles:!0})))})})}connectedCallback(){this.init()}}customElements.define("sht-quick-view-variant-swatch-select",SHTQuickViewVariantSwatchSelect);class SHTProductQuickViewForm extends HTMLElement{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.elms={form:this.$("form"),submit_btn:this.$('[type="submit"]'),error_wrapper:this.$(".js-product-form-error-wrapper"),error_message:this.$(".js-product-form-error-message"),spinner:this.$(".js-product-form-spinner"),sticky_header:SHTHelper.qs("sht-sticky-header"),header:SHTHelper.qs("sht-header"),announcement_bar:SHTHelper.qs("sht-ann-bar")},this.cartNotiType=document.body.getAttribute("data-cart-show-type"),this.cartType=document.body.getAttribute("data-cart-type"),this.elms.form.querySelector("[name=id]").disabled=!1,this.cartNotification=SHTHelper.qs("sht-cart-noti"),this.cartDrawer=SHTHelper.qs("sht-cart-drwr"),this.cartDrawerForm=SHTHelper.qs("sht-cart-drwr-frm"),this.quickShopDialog=SHTHelper.qs("sht-dialog-quickshop"),this.bindEventHandlers()}bindEventHandlers(){this.elms.form.addEventListener("submit",this.onSubmitHandler.bind(this))}onSubmitHandler(i){if(i.preventDefault(),!this.elms.submit_btn.classList.contains("loading")){this.handleErrorMessage(),this.elms.submit_btn.setAttribute("aria-disabled",!0),this.elms.submit_btn.classList.add("loading"),this.elms.spinner.classList.remove("hidden");let t=[],e=(this.cartNotification&&(t=this.cartNotification.getSectionsToRender()),this.cartDrawer&&(t=[...t,...this.cartDrawer.getSectionsToRender()]),void 0!==i.submitter?this.elms.submit_btn:null);i=new FormData(this.elms.form);t.length&&i.append("sections",t.map(t=>t.id)),i.append("sections_url",window.location.pathname),SHTHelper.fetchConfigHTTP.body=i,fetch(""+routes.cart_add_url,SHTHelper.fetchConfigHTTP).then(t=>t.json()).then(t=>{if(t.status)this.handleErrorMessage(t.description);else{switch(this.elms.sticky_header&&this.elms.sticky_header.dataset.isEnabled&&this.elms.sticky_header.reveal(),this.quickShopDialog&&!this.quickShopDialog.hasAttribute("hidden")&&(e=this.quickShopDialog.opener),this.cartNotiType){case"show_popup_noti":this.handleShowNotification(t,e);break;case"show_drawer":this.handleShowDrawer(t,e)}this.elms.header||window.location.assign(window.routes.cart_url),this.quickShopDialog&&this.quickShopDialog.closeModal()}}).catch(t=>{console.error(t)}).finally(()=>{this.elms.submit_btn.classList.remove("loading"),this.elms.submit_btn.removeAttribute("aria-disabled"),this.elms.spinner.classList.add("hidden")})}}handleShowNotification(t,e){this.cartNotification&&this.cartNotification.renderContents(t,!0,e),this.cartDrawerForm&&this.cartDrawerForm.renderContents(t)}handleShowDrawer(t,e){"drawer"===this.cartType?(this.cartNotification?.renderContents(t,!1),this.cartDrawerForm?.renderContents(t),this.cartDrawer?.querySelector(".js-drawer-message")?.setActiveMessage(),this.cartDrawer?.openDrawer(e)):"page"===this.cartType&&(this.cartNotification?.renderContents(t,!1),window.location.assign(window.routes.cart_url))}handleErrorMessage(t=!1){this.elms.error_wrapper.toggleAttribute("hidden",!t),t&&(this.elms.error_message.textContent=t)}}customElements.define("sht-prd-qck-vw-frm",SHTProductQuickViewForm);class SHTProductQuickViewLoadDynamicCheckoutButton extends HTMLElement{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.template=this.$("template"),this.json=JSON.parse(SHTHelper.qs('#shopify-features[type="application/json"]').textContent),this.loadDynamicCheckoutButton()}loadDynamicCheckoutButton(){new IntersectionObserver((t,i)=>{t.forEach(t=>{var e;1!==t.intersectionRatio||this.getAttribute("loaded")||(t=this.template.content.firstElementChild.cloneNode(!0),(e=document.createElement("script")).src=this.json.smart_payment_buttons_url,e.setAttribute("data-source-attribute","shopify.dynamic_checkout.product.init"),this.parentNode.insertBefore(t,this.nextSibling),this.parentNode.insertBefore(e,this.nextSibling),this.setAttribute("loaded",!0),i.unobserve(this))})}).observe(this)}bindEventHandlers(){}}customElements.define("sht-prd-qck-vw-load-dyn-co-btn",SHTProductQuickViewLoadDynamicCheckoutButton);class SHTProductQuickViewMediaGallery extends HTMLElement{constructor(){super(),this.$=this.querySelector.bind(this),this.$$=this.querySelectorAll.bind(this),this.currentMediaID=null}connectedCallback(){this.bindEventHandlers(),this.initFirstThumbnail(),this.handleResize()}disconnectedCallback(){this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler)}handleResize(){let t;this.resizeHandler=()=>{clearTimeout(t),t=setTimeout(()=>{this.currentMediaID&&this.setActiveItem(this.currentMediaID)},150)},window.addEventListener("resize",this.resizeHandler)}bindEventHandlers(){var t=document.querySelector(".product__quickview sht-prd-slideshow");t&&(t=t.querySelectorAll(".js-slideshow-btn-thumb")).length&&t.forEach((e,t)=>{e.addEventListener("click",t=>{t.preventDefault();t=e.dataset.target;t&&(this.setActiveItem(t),this.setActiveThumbnail(t))})})}initFirstThumbnail(){var t=document.querySelector(".product__quickview sht-prd-slideshow");t&&(t=t.querySelector(".js-slideshow-btn-thumb"))&&(t.closest("sht-vert-carousel-itm")?.classList.add("is-active-item"),t=this.$(".js-carousel-item.d-block"))&&(this.currentMediaID=t.dataset.mediaId)}setActiveThumbnail(r){var t=document.querySelector(".product__quickview sht-prd-slideshow");if(t){var e,a=t.querySelectorAll(".js-slideshow-btn-thumb");const n=t.querySelector(".product-slideshow__thumbs"),o=t.querySelector(".thumbnail__horizoltal-carousel");let i=null,s=null;a.forEach(t=>{var e=t.closest("sht-vert-carousel-itm");t.dataset.target===r?(e?.classList.add("is-active-item"),n?.contains(e)&&null!==n.offsetParent&&(i=e,s=n),o?.contains(e)&&null!==o.offsetParent&&(i=e,s=o)):e?.classList.remove("is-active-item")}),i&&s&&(s===n?(t=s.clientHeight,a=i.offsetTop,e=i.offsetHeight,s.scrollTo({top:a-t/2+e/2,behavior:"smooth"})):s===o&&(a=s.clientWidth,t=i.offsetLeft,e=i.offsetWidth,s.scrollTo({left:t-a/2+e/2,behavior:"smooth"})))}}setActiveItem(t){var e=this.$(`[data-media-id="${t}"]`);e&&(this.currentMediaID=t,this.$$(".js-carousel-item").forEach(t=>{t.classList.remove("d-block"),t.classList.add("d-none")}),e.classList.add("d-block"),e.classList.remove("d-none"))}}customElements.define("sht-prd-qck-vw-media-gallery",SHTProductQuickViewMediaGallery);