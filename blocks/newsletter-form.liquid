
{% liquid
  assign form_id = 'newsletterForm-' | append: section.id | md5 | truncate: 12, ""
  assign button_label = block.settings.button_label | default: 'Subscribe'
  assign button_style = block.settings.button_style | default: 'primary'
  assign content_align = 'center-xs'

  assign block_width = block.settings.width
  assign mobile_block_width = block.settings.mobile_width

  assign width_class = 'w-100-md'
  if block_width == 'fit'
    assign width_class = 'w-auto-md'
  elsif block_width == 'custom'
    assign width_class = 'w-custom-md'
    assign custom_width = block.settings.custom_width | append: '%'
  endif

  assign mobile_width_class = 'w-100'
  if mobile_block_width == 'fit'
    assign mobile_width_class = 'w-auto'
  elsif mobile_block_width == 'custom'
    assign mobile_width_class = 'w-custom'
    assign custom_mobile_width = block.settings.mobile_custom_width | append: '%'
  endif
%}
<div class="{{ width_class }} {{ mobile_width_class }}" {{ block.shopify_attributes }} style="{% if block_width == 'custom' %}--width-md: {{ custom_width }};{% endif %} {% if mobile_block_width == 'custom' %}--width: {{ custom_mobile_width }};{% endif %}">
  {% render 'newsletter-form', 
    form_id: form_id,
    form_name: 'newsletterForm', 
    content_align: content_align,
    button_label: button_label,
    button_style: button_style,
    classes: 'form-layout'
  %}
</div>


{% schema %}
{
  "name": "t:general.newsletter_form",
  "tag": null,
  "settings": [
    {
      "type": "text",
      "id": "button_label",
      "label": "t:general.button_label",
      "default": "Subscribe"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Style",
      "options": [
        {
          "value": "primary",
          "label": "t:general.primary"
        },
        {
          "value": "secondary",
          "label": "t:general.secondary"
        },
        {
          "value": "link",
          "label": "t:general.textlink"
        }
      ],
      "default": "primary"
    },
    {
      "type": "header",
      "content": "t:general.size"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:general.width",
      "default": "fit",
      "options": [
        {
          "value": "fill",
          "label": "t:general.fill"
        },
        {
          "value": "fit",
          "label": "t:general.fit"
        },
        {
          "value": "custom",
          "label": "t:general.custom"
        }
      ]
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:general.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == 'custom' }}"
    },
    {
      "type": "select",
      "id": "mobile_width",
      "label": "t:general.mobile_width",
      "default": "fit",
      "options": [
        {
          "value": "fill",
          "label": "t:general.fill"
        },
        {
          "value": "fit",
          "label": "t:general.fit"
        },
        {
          "value": "custom",
          "label": "t:general.custom"
        }
      ]
    },
    {
      "type": "range",
      "id": "mobile_custom_width",
      "label": "t:general.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.mobile_width == 'custom' }}"
    }
  ],
  "presets": [
    {
      "name": "t:general.newsletter_form",
      "category": "t:general.basic"
    }
  ]
}
{% endschema %}
